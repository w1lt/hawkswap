{% extends 'base.html' %} {% block title %}Home | HawkSwap{% endblock %} {%
block content %}
<script>
  var currentdate = new Date();
  var hours = currentdate.getHours();
  var greeting = "Hello";
  if (hours >= 0 && hours < 12) {
    greeting = "Good morning";
  } else if (hours >= 12 && hours < 18) {
    greeting = "Good afternoon";
  } else {
    greeting = "Good evening";
  }
  document.write(greeting + ", {{ current_user.username }}!");
</script>
<h2>All Listings</h2>

{% for listing in listings %}

<div class="listing">
  <a href="/listing/{{ listing.id }}">
  <b>
    <img src="{{ listing.image_path }}" alt="{{ listing.name }}" />
    <div>
    <script>
      var price = "{{ listing.price }}";
      price = Math.round(price);
      document.write("$" + price);
    </script>
    
  </b>
</div>
  {{ listing.name }} 
  <script>
    var dateposted = new Date("{{ listing.dateposted }}");
    var currentdate = new Date();
    var diff = currentdate - dateposted;
    var days = Math.floor(diff / (1000 * 60 * 60 * 24));
    var hours = Math.floor(diff / (1000 * 60 * 60));
    if (days == 0) {
      if (hours == 0) {
        var minutes = Math.floor(diff / (1000 * 60));
        if (minutes == 0) {
          document.write("just now");
        } else {
          document.write(minutes + " minutes ago");
        }
      } else {
        document.write(hours + " hours ago");
      }
    } else {
      document.write(days + " days ago");
    }
  </script>
</a>
</div>

{% endfor %} {% endblock %}
